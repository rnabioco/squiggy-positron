%%{init: {'theme':'neutral'}}%%
flowchart TD
    subgraph IDE["Positron IDE"]
        RUNTIME[Runtime API<br/>executeCode / getVariable]
        KERNEL[Active Python Kernel]
        RUNTIME <--> KERNEL
    end

    IDE --> BRIDGE_PY & BRIDGE_TS

    subgraph LOWER[" "]
        direction LR

        subgraph PY["Python Backend"]
            BRIDGE_PY[" "]
            IO[File I/O<br/>POD5 / BAM / FASTA]
            PROCESS[Signal Processing<br/>Normalization / Alignment]
            FACTORY[Plot Factory<br/>Strategy Pattern]
            BOKEH[Bokeh Visualization<br/>HTML Generation]
            BRIDGE_PY --> IO
            IO --> PROCESS
            PROCESS --> FACTORY
            FACTORY --> BOKEH
        end

        subgraph TS["TypeScript Extension"]
            BRIDGE_TS[" "]
            EXT[Extension API Integration]
            UI[User Interface Panels<br/>React 18 Components]
            CMD[Command Handlers]
            BRIDGE_TS --> EXT
            UI --> CMD
            CMD --> EXT
        end
    end

    KERNEL -.-> IO
    BOKEH -.->|HTML| EXT
    EXT -.->|Display| UI

    style LOWER fill:none,stroke:none
    style BRIDGE_PY fill:none,stroke:none
    style BRIDGE_TS fill:none,stroke:none
